# TriageBot

<div align="center">

![TriageBot Status](https://img.shields.io/badge/status-active-success.svg)
![Python Version](https://img.shields.io/badge/python-3.10%2B-blue)
![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-009688.svg)
![Gemini](https://img.shields.io/badge/AI-Gemini%201.5%20Flash-orange)

**An intelligent multi-agent system that automatically triages GitHub issues by classifying, prioritizing, routing, and responding to issues in real-time.**

[Features](#features) â€¢ [Architecture](#architecture) â€¢ [Getting Started](#getting-started) â€¢ [Deployment](#deployment)

</div>

---

## Overview

TriageBot reduces maintainer burden by 60-80% through AI-powered automation. It listens to your GitHub repository events and employs a suite of specialized agents to handle initial triage, allowing your team to focus on solving problems rather than sorting them.

## Features

- ðŸ¤– **Intelligent Classification**: Uses Google Gemini 1.5 Flash to categorize issues (Bug, Feature, Question, etc.) with high accuracy.
- ðŸš¦ **Smart Routing**: Automatically assigns issues to the correct team (Backend, Frontend, Security, DevOps) based on content analysis and rules.
- ðŸ’¬ **Context-Aware Responses**: specific, helpful auto-replies generated by LLMs to acknowledge users and request missing information.
- ðŸ·ï¸ **Auto-Labeling**: Applies appropriate labels to issues instantly via GitHub API.
- ðŸ” **Duplicate Detection**: (Phase 2) Identifies potential duplicate issues using `sentence-transformers` embeddings and ChromaDB vector search.
- ðŸ›¡ï¸ **Security**: Verifies all webhook signatures to ensure requests are legitimately from GitHub.

## Architecture

The system is built on a micro-agent architecture orchestrated by FastAPI:

```mermaid
graph TD
    GH[GitHub Webhook] --> API[FastAPI Endpoint]
    API --> ORC[Orchestrator]
    ORC --> CLS[Classifier Agent - Gemini]
    ORC --> SIM[Similarity Agent - Embeddings]
    ORC --> RTR[Router Agent]
    ORC --> RSP[Responder Agent - Gemini]
    
    CLS --> GH_API[GitHub API]
    RSP --> GH_API
    
    SIM <--> CHROMA[(ChromaDB)]
```

### Tech Stack
- **Backend**: FastAPI, Uvicorn
- **AI/LLM**: Google Generative AI (Gemini 1.5 Flash)
- **Embeddings**: Sentence-Transformers (`all-MiniLM-L6-v2`)
- **Vector DB**: ChromaDB
- **Database**: SQLite (for session/state if needed)
- **Containerization**: Docker

## Getting Started

### Prerequisites
- Python 3.10+
- GitHub Account & Repository
- Google AI Studio API Key (Free)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/sriksven/TriageBot.git
   cd TriageBot
   ```

2. **Set up Virtual Environment**
   ```bash
   python -m venv venv
   source venv/bin/activate
   ```

3. **Install Dependencies**
   ```bash
   pip install -r requirements.txt
   ```

4. **Configuration**
   Copy `.env.example` to `.env` and fill in your keys:
   ```bash
   cp .env.example .env
   ```
   
   required variables:
   - `GEMINI_API_KEY`: Your key from Google AI Studio
   - `GITHUB_TOKEN`: Personal Access Token with repo scope
   - `GITHUB_WEBHOOK_SECRET`: Secret used in your GitHub Webhook settings

5. **Run Locally**
   ```bash
   uvicorn app.main:app --reload
   ```

## Development

### Project Structure
```
triagebot/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ agents/         # AI Agents (Classifier, Router, Responder)
â”‚   â”œâ”€â”€ api/            # API Endpoints
â”‚   â”œâ”€â”€ core/           # Security & Config
â”‚   â”œâ”€â”€ services/       # External Services (GitHub, LLM, VectorStore)
â”‚   â””â”€â”€ main.py         # Application Entry
â”œâ”€â”€ tests/              # Unit & Integration Tests
â””â”€â”€ scripts/            # Helper scripts
```

### Running Tests
```bash
pytest tests/
```

## Deployment

### Docker
```bash
docker-compose up -d --build
```

### GitHub Webhook Setup
1. Go to Repository Settings > Webhooks
2. Add webhook: `https://your-domain.com/api/v1/webhooks/github`
3. Content type: `application/json`
4. Secret: Same as `GITHUB_WEBHOOK_SECRET`
5. Events: Select "Issues"

## License

MIT
